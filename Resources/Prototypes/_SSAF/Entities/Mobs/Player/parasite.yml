- type: entity
  name: parasite
  id: MobParasite
  parent:
    - BaseSimpleMob
    - MobAtmosExposed
    - MobBloodstream
    - MobFlammable
  description: A nasty parasite looking for a host
  components:
  - type: MovementSpeedModifier
    baseWalkSpeed : 3.00
    baseSprintSpeed : 5.00
  - type: InputMover
  - type: MobMover
  - type: Reactive
    groups:
      Flammable: [Touch]
      Extinguish: [Touch]
  - type: NpcFactionMember
    factions:
    - SimpleHostile
  - type: Sprite
    drawdepth: SmallMobs
    sprite: _SSAF/Mobs/parasite.rsi
    layers:
    - map: ["enum.DamageStateVisualLayers.Base"]
      state: parasite
  - type: Physics
    bodyType: KinematicController
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 0.3
        density: 230
        mask:
        - SmallMobMask
        layer:
        - SmallMobLayer
  - type: MobState
  - type: MobThresholds
    thresholds:
      0: Alive
      20: Dead
  - type: Body
  - type: Hunger # probably should be prototyped
    thresholds:
      Overfed: 200
      Okay: 150
      Peckish: 100
      Starving: 50
      Dead: 0
    baseDecayRate: 0.105
  - type: Thirst
    thresholds:
      OverHydrated: 600
      Okay: 450
      Thirsty: 300
      Parched: 150
      Dead: 0
    baseDecayRate: 0.1
  - type: GhostRole
    makeSentient: false
    name: Parasite
    description: Infect a host, feed, then spread your young
    rules: ghost-role-information-freeagent-rules
    mindRoles:
    - MindRoleGhostRoleFreeAgent
    raffle:
      settings: default
  - type: GhostTakeoverAvailable
  - type: Tag
    tags:
    - CannotSuicide
  - type: NoSlip
  - type: MobPrice
    price: 5000
  - type: GuideHelp
    guides:
    - MinorAntagonists
  - type: Grammar
    attributes:
      gender: neuter
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 20
      behaviors:
      - !type:GibBehavior { }
  - type: Parasite
    infectHostAction: ActionInfectHost


- type: entity
  id: ActionInfectHost
  name: Infect Host
  description: Wriggle your way into a host.
  components:
  - type: EntityTargetAction
    canTargetSelf: false
    icon:
      sprite: _SSAF/Mobs/parasite.rsi
      state: icon
    event: !type:ParasiteInfectHostActionEvent
    useDelay: 1
    priority: 3
